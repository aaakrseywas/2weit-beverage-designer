<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="C:\Users\User\Desktop\2weit beverage designer\style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞–ø–∏—Ç–∫–æ–≤</title>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Purple+Purse&family=Raleway:ital,wght@0,100..900;1,100..900&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">

</head>
<body>
    <div class="container">
        <header>
            <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞–ø–∏—Ç–∫–æ–≤</h1>
            <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å</p>
        </header>

        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä -->
            <div class="constructor-section">
                <h2>  –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞–ø–∏—Ç–∫–∞</h2>
                
                <div class="category-tabs">
                    <button class="category-tab active" data-category="all">–í—Å–µ</button>
                    <button class="category-tab" data-category="base">–û—Å–Ω–æ–≤–∞</button>
                    <button class="category-tab" data-category="fruits">–§—Ä—É–∫—Ç—ã</button>
                    <button class="category-tab" data-category="syrups">–°–∏—Ä–æ–ø—ã</button>
                    <button class="category-tab" data-category="additives">–î–æ–±–∞–≤–∫–∏</button>
                </div>

                <div class="ingredients-grid" id="ingredientsGrid">
                    <!-- –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>

                <div class="slider-container">
                    <label>–û–±—ä–µ–º –Ω–∞–ø–∏—Ç–∫–∞: <span id="volumeValue">300</span> –º–ª</label>
                    <input type="range" class="slider" id="volumeSlider" min="100" max="1000" value="300" step="50">
                </div>

                <div class="slider-container">
                    <label>–°–ª–∞–¥–æ—Å—Ç—å: <span id="sweetnessValue">5</span>/10</label>
                    <input type="range" class="slider" id="sweetnessSlider" min="1" max="10" value="5">
                </div>

                <button class="btn" onclick="calculateNutrition()"> –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å</button>
                <button class="btn btn-success" onclick="saveRecipe()"> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
                <button class="btn btn-danger" onclick="clearRecipe()"> –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –†–µ—Ü–µ–ø—Ç –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="recipe-section">
                <h2> –í–∞—à —Ä–µ—Ü–µ–ø—Ç</h2>
                
                <div class="recipe-display" id="recipeDisplay">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞...</p>
                </div>

                <div class="nutrition-info">
                    <h3> –ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å</h3>
                    <div class="nutrition-grid">
                        <div class="nutrition-item">
                            <div> –ö–∞–ª–æ—Ä–∏–∏</div>
                            <div id="calories">0 –∫–∫–∞–ª</div>
                        </div>
                        <div class="nutrition-item">
                            <div> –ë–µ–ª–∫–∏</div>
                            <div id="proteins">0 –≥</div>
                        </div>
                        <div class="nutrition-item">
                            <div> –ñ–∏—Ä—ã</div>
                            <div id="fats">0 –≥</div>
                        </div>
                        <div class="nutrition-item">
                            <div> –£–≥–ª–µ–≤–æ–¥—ã</div>
                            <div id="carbs">0 –≥</div>
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="sugarProgress" style="width: 0%"></div>
                    </div>
                    <div>–°–∞—Ö–∞—Ä: <span id="sugar">0</span> –≥</div>
                </div>

                <div class="saved-recipes">
                    <h3> –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã</h3>
                    <div id="savedRecipes">
                        <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
        const ingredients = [
            // –û—Å–Ω–æ–≤–∞
            { id: 1, name: "–í–æ–¥–∞", category: "base", icon: "", calories: 0, proteins: 0, fats: 0, carbs: 0, sugar: 0 },
            { id: 2, name: "–ú–æ–ª–æ–∫–æ", category: "base", icon: "", calories: 42, proteins: 3.4, fats: 1, carbs: 4.7, sugar: 4.7 },
            { id: 3, name: "–ô–æ–≥—É—Ä—Ç", category: "base", icon: "", calories: 61, proteins: 3.5, fats: 3.3, carbs: 4.7, sugar: 4.7 },
            { id: 4, name: "–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π", category: "base", icon: "", calories: 45, proteins: 0.7, fats: 0.2, carbs: 10.4, sugar: 8.4 },
            
            // –§—Ä—É–∫—Ç—ã
            { id: 5, name: "–ö–ª—É–±–Ω–∏–∫–∞", category: "fruits", icon: "", calories: 32, proteins: 0.7, fats: 0.3, carbs: 7.7, sugar: 4.9 },
            { id: 6, name: "–ë–∞–Ω–∞–Ω", category: "fruits", icon: "", calories: 89, proteins: 1.1, fats: 0.3, carbs: 22.8, sugar: 12.2 },
            { id: 7, name: "–Ø–±–ª–æ–∫–æ", category: "fruits", icon: "", calories: 52, proteins: 0.3, fats: 0.2, carbs: 13.8, sugar: 10.4 },
            { id: 8, name: "–õ–∏–º–æ–Ω", category: "fruits", icon: "", calories: 29, proteins: 1.1, fats: 0.3, carbs: 9.3, sugar: 2.5 },
            
            // –°–∏—Ä–æ–ø—ã
            { id: 9, name: "–ö–ª—É–±–Ω–∏—á–Ω—ã–π —Å–∏—Ä–æ–ø", category: "syrups", icon: "", calories: 260, proteins: 0, fats: 0, carbs: 65, sugar: 65 },
            { id: 10, name: "–í–∞–Ω–∏–ª—å–Ω—ã–π —Å–∏—Ä–æ–ø", category: "syrups", icon: "", calories: 250, proteins: 0, fats: 0, carbs: 63, sugar: 63 },
            { id: 11, name: "–®–æ–∫–æ–ª–∞–¥–Ω—ã–π —Å–∏—Ä–æ–ø", category: "syrups", icon: "", calories: 280, proteins: 2, fats: 3, carbs: 62, sugar: 58 },
            { id: 12, name: "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π —Å–∏—Ä–æ–ø", category: "syrups", icon: "", calories: 270, proteins: 0, fats: 0, carbs: 67, sugar: 67 },
            
            // –î–æ–±–∞–≤–∫–∏
            { id: 13, name: "–ú—ë–¥", category: "additives", icon: "", calories: 304, proteins: 0.3, fats: 0, carbs: 82.4, sugar: 82.1 },
            { id: 14, name: "–ü—Ä–æ—Ç–µ–∏–Ω", category: "additives", icon: "", calories: 380, proteins: 75, fats: 5, carbs: 10, sugar: 3 },
            { id: 15, name: "–û–≤—Å—è–Ω—ã–µ —Ö–ª–æ–ø—å—è", category: "additives", icon: "", calories: 389, proteins: 16.9, fats: 6.9, carbs: 66.3, sugar: 0.8 },
            { id: 16, name: "–õ—å–Ω—è–Ω–æ–µ —Å–µ–º—è", category: "additives", icon: "", calories: 534, proteins: 18.3, fats: 42.2, carbs: 28.9, sugar: 1.6 }
        ];

        let selectedIngredients = [];
        let currentRecipe = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function init() {
            renderIngredients();
            setupEventListeners();
            loadSavedRecipes();
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
        function renderIngredients(category = 'all') {
            const grid = document.getElementById('ingredientsGrid');
            grid.innerHTML = '';

            const filteredIngredients = category === 'all' 
                ? ingredients 
                : ingredients.filter(ing => ing.category === category);

            filteredIngredients.forEach(ingredient => {
                const isSelected = selectedIngredients.some(sel => sel.id === ingredient.id);
                const card = document.createElement('div');
                card.className = `ingredient-card ${isSelected ? 'selected' : ''}`;
                card.innerHTML = `
                    <div class="ingredient-icon">${ingredient.icon}</div>
                    <div class="ingredient-name">${ingredient.name}</div>
                `;
                card.onclick = () => toggleIngredient(ingredient);
                grid.appendChild(card);
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞
        function toggleIngredient(ingredient) {
            const index = selectedIngredients.findIndex(sel => sel.id === ingredient.id);
            
            if (index === -1) {
                selectedIngredients.push({...ingredient, amount: 50});
            } else {
                selectedIngredients.splice(index, 1);
            }
            
            updateRecipeDisplay();
            renderIngredients(getCurrentCategory());
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function getCurrentCategory() {
            const activeTab = document.querySelector('.category-tab.active');
            return activeTab ? activeTab.dataset.category : 'all';
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –¢–∞–±—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderIngredients(tab.dataset.category);
                });
            });

            // –°–ª–∞–π–¥–µ—Ä –æ–±—ä–µ–º–∞
            document.getElementById('volumeSlider').addEventListener('input', (e) => {
                document.getElementById('volumeValue').textContent = e.target.value;
                updateRecipeDisplay();
            });

            // –°–ª–∞–π–¥–µ—Ä —Å–ª–∞–¥–æ—Å—Ç–∏
            document.getElementById('sweetnessSlider').addEventListener('input', (e) => {
                document.getElementById('sweetnessValue').textContent = e.target.value;
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞
        function updateRecipeDisplay() {
            const display = document.getElementById('recipeDisplay');
            
            if (selectedIngredients.length === 0) {
                display.innerHTML = '<p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞...</p>';
                return;
            }

            let html = '<h4>–°–æ—Å—Ç–∞–≤ –≤–∞—à–µ–≥–æ –Ω–∞–ø–∏—Ç–∫–∞:</h4><ul class="ingredient-list">';
            
            selectedIngredients.forEach(ingredient => {
                html += `<li>${ingredient.icon} ${ingredient.name} - 50 –º–ª</li>`;
            });

            html += `</ul><p><strong>–û–±—â–∏–π –æ–±—ä–µ–º: ${document.getElementById('volumeSlider').value} –º–ª</strong></p>`;
            display.innerHTML = html;
        }

        // –†–∞—Å—á–µ—Ç –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏
        function calculateNutrition() {
            if (selectedIngredients.length === 0) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç!');
                return;
            }

            const volume = parseInt(document.getElementById('volumeSlider').value);
            const sweetness = parseInt(document.getElementById('sweetnessSlider').value);
            
            let totalCalories = 0;
            let totalProteins = 0;
            let totalFats = 0;
            let totalCarbs = 0;
            let totalSugar = 0;

            // –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
            selectedIngredients.forEach(ingredient => {
                const proportion = 50 / volume; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º 50 –º–ª –∫–∞–∂–¥–æ–≥–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞
                
                totalCalories += ingredient.calories * proportion;
                totalProteins += ingredient.proteins * proportion;
                totalFats += ingredient.fats * proportion;
                totalCarbs += ingredient.carbs * proportion;
                totalSugar += ingredient.sugar * proportion;
            });

            // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–ª–∞–¥–æ—Å—Ç–∏
            const sweetnessMultiplier = sweetness / 5;
            totalSugar *= sweetnessMultiplier;
            totalCarbs = totalCarbs - (totalSugar / sweetnessMultiplier) + totalSugar;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            document.getElementById('calories').textContent = Math.round(totalCalories) + ' –∫–∫–∞–ª';
            document.getElementById('proteins').textContent = Math.round(totalProteins * 10) / 10 + ' –≥';
            document.getElementById('fats').textContent = Math.round(totalFats * 10) / 10 + ' –≥';
            document.getElementById('carbs').textContent = Math.round(totalCarbs * 10) / 10 + ' –≥';
            document.getElementById('sugar').textContent = Math.round(totalSugar * 10) / 10 + ' –≥';

            // –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å–∞—Ö–∞—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 50–≥ –Ω–∞ –ø–æ—Ä—Ü–∏—é)
            const sugarPercentage = Math.min((totalSugar / 50) * 100, 100);
            document.getElementById('sugarProgress').style.width = sugarPercentage + '%';

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
            currentRecipe = {
                ingredients: [...selectedIngredients],
                volume: volume,
                sweetness: sweetness,
                nutrition: {
                    calories: Math.round(totalCalories),
                    proteins: Math.round(totalProteins * 10) / 10,
                    fats: Math.round(totalFats * 10) / 10,
                    carbs: Math.round(totalCarbs * 10) / 10,
                    sugar: Math.round(totalSugar * 10) / 10
                },
                timestamp: new Date().toLocaleString()
            };
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞
        function saveRecipe() {
            if (!currentRecipe) {
                alert('–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å!');
                return;
            }

            const savedRecipes = JSON.parse(localStorage.getItem('savedRecipes') || '[]');
            savedRecipes.push({
                ...currentRecipe,
                id: Date.now(),
                name: `–†–µ—Ü–µ–ø—Ç –æ—Ç ${new Date().toLocaleDateString()}`
            });

            localStorage.setItem('savedRecipes', JSON.stringify(savedRecipes));
            loadSavedRecipes();
            alert('–†–µ—Ü–µ–ø—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
        function loadSavedRecipes() {
            const savedRecipes = JSON.parse(localStorage.getItem('savedRecipes') || '[]');
            const container = document.getElementById('savedRecipes');

            if (savedRecipes.length === 0) {
                container.innerHTML = '<p>–ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã...</p>';
                return;
            }

            let html = '';
            savedRecipes.forEach(recipe => {
                html += `
                    <div class="recipe-item">
                        <h4>${recipe.name}</h4>
                        <p><strong>–û–±—ä–µ–º:</strong> ${recipe.volume} –º–ª</p>
                        <p><strong>–ö–∞–ª–æ—Ä–∏–∏:</strong> ${recipe.nutrition.calories} –∫–∫–∞–ª</p>
                        <button class="btn" onclick="loadRecipe(${recipe.id})">üìñ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                        <button class="btn btn-danger" onclick="deleteRecipe(${recipe.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ü–µ–ø—Ç–∞
        function loadRecipe(recipeId) {
            const savedRecipes = JSON.parse(localStorage.getItem('savedRecipes') || '[]');
            const recipe = savedRecipes.find(r => r.id === recipeId);
            
            if (recipe) {
                selectedIngredients = [...recipe.ingredients];
                document.getElementById('volumeSlider').value = recipe.volume;
                document.getElementById('volumeValue').textContent = recipe.volume;
                document.getElementById('sweetnessSlider').value = recipe.sweetness;
                document.getElementById('sweetnessValue').textContent = recipe.sweetness;
                
                updateRecipeDisplay();
                renderIngredients(getCurrentCategory());
                
                // –û–±–Ω–æ–≤–ª—è–µ–º nutritional info
                document.getElementById('calories').textContent = recipe.nutrition.calories + ' –∫–∫–∞–ª';
                document.getElementById('proteins').textContent = recipe.nutrition.proteins + ' –≥';
                document.getElementById('fats').textContent = recipe.nutrition.fats + ' –≥';
                document.getElementById('carbs').textContent = recipe.nutrition.carbs + ' –≥';
                document.getElementById('sugar').textContent = recipe.nutrition.sugar + ' –≥';
                
                const sugarPercentage = Math.min((recipe.nutrition.sugar / 50) * 100, 100);
                document.getElementById('sugarProgress').style.width = sugarPercentage + '%';
                
                currentRecipe = recipe;
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞
        function deleteRecipe(recipeId) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç?')) {
                const savedRecipes = JSON.parse(localStorage.getItem('savedRecipes') || '[]');
                const filteredRecipes = savedRecipes.filter(r => r.id !== recipeId);
                localStorage.setItem('savedRecipes', JSON.stringify(filteredRecipes));
                loadSavedRecipes();
            }
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Ü–µ–ø—Ç–∞
        function clearRecipe() {
            selectedIngredients = [];
            currentRecipe = null;
            updateRecipeDisplay();
            renderIngredients(getCurrentCategory());
            
            // –°–±—Ä–æ—Å nutritional info
            document.getElementById('calories').textContent = '0 –∫–∫–∞–ª';
            document.getElementById('proteins').textContent = '0 –≥';
            document.getElementById('fats').textContent = '0 –≥';
            document.getElementById('carbs').textContent = '0 –≥';
            document.getElementById('sugar').textContent = '0 –≥';
            document.getElementById('sugarProgress').style.width = '0%';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = init;
    </script>
</body>
</html>